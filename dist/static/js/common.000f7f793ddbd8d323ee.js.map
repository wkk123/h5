{"version":3,"sources":["webpack:///./src/pages/common/common.js"],"names":["win","lib","tid","doc","document","docEl","documentElement","metaEl","querySelector","flexibleEl","dpr","scale","flexible","match","getAttribute","parseFloat","parseInt","content","initialDpr","maximumDpr","toFixed","isIPhone","navigator","appVersion","devicePixelRatio","setAttribute","createElement","firstElementChild","appendChild","wrap","write","innerHTML","refreshRem","width","getBoundingClientRect","rem","style","fontSize","addEventListener","clearTimeout","setTimeout","e","persisted","readyState","body","rem2px","d","val","this","px2rem","window"],"mappings":"sCAAC,SAAWA,EAAKC,GACf,IAMIC,EANAC,EAAMH,EAAII,SACVC,EAAQF,EAAIG,gBACZC,EAASJ,EAAIK,cAAc,yBAC3BC,EAAaN,EAAIK,cAAc,yBAC/BE,EAAM,EACNC,EAAQ,EAERC,EAAWX,EAAIW,WAAaX,EAAIW,aAEpC,GAAIL,EAAQ,CAEV,IAAIM,EAAQN,EAAOO,aAAa,WAAWD,MAAM,4BAC7CA,IACFF,EAAQI,WAAWF,EAAM,IACzBH,EAAMM,SAAS,EAAIL,SAEhB,GAAIF,EAAY,CACrB,IAAIQ,EAAUR,EAAWK,aAAa,WACtC,GAAIG,EAAS,CACX,IAAIC,EAAaD,EAAQJ,MAAM,0BAC3BM,EAAaF,EAAQJ,MAAM,0BAC3BK,IACFR,EAAMK,WAAWG,EAAW,IAC5BP,EAAQI,YAAY,EAAIL,GAAKU,QAAQ,KAEnCD,IACFT,EAAMK,WAAWI,EAAW,IAC5BR,EAAQI,YAAY,EAAIL,GAAKU,QAAQ,MAK3C,IAAKV,IAAQC,EAAO,CAElB,IAAIU,EAAWrB,EAAIsB,UAAUC,WAAWV,MAAM,YAC1CW,EAAmBxB,EAAIwB,iBAc3Bb,EAAQ,GAVJD,EAHAW,EAEEG,GAAoB,KAAOd,GAAOA,GAAO,GACrC,EACGc,GAAoB,KAAOd,GAAOA,GAAO,GAC5C,EAEA,EAIF,GAMV,GADAL,EAAMoB,aAAa,WAAYf,IAC1BH,EAIH,IAHAA,EAASJ,EAAIuB,cAAc,SACpBD,aAAa,OAAQ,YAC5BlB,EAAOkB,aAAa,UAAW,iBAAmBd,EAAQ,mBAAqBA,EAAQ,mBAAqBA,EAAQ,sBAChHN,EAAMsB,kBACRtB,EAAMsB,kBAAkBC,YAAYrB,OAC/B,CACL,IAAIsB,EAAO1B,EAAIuB,cAAc,OAC7BG,EAAKD,YAAYrB,GACjBJ,EAAI2B,MAAMD,EAAKE,WAInB,SAASC,IACP,IAAIC,EAAQ5B,EAAM6B,wBAAwBD,MACtCA,EAAQvB,EAAM,MAChBuB,EAAQ,IAAMvB,GAEhB,IAAIyB,EAAMF,EAAQ,GAClB5B,EAAM+B,MAAMC,SAAWF,EAAM,KAC7BvB,EAASuB,IAAMnC,EAAImC,IAAMA,EAG3BnC,EAAIsC,iBAAiB,SAAU,WAC7BC,aAAarC,GACbA,EAAMsC,WAAWR,EAAY,OAC5B,GACHhC,EAAIsC,iBAAiB,WAAY,SAAUG,GACrCA,EAAEC,YACJH,aAAarC,GACbA,EAAMsC,WAAWR,EAAY,QAE9B,GAEoB,aAAnB7B,EAAIwC,WACNxC,EAAIyC,KAAKR,MAAMC,SAAW,GAAK3B,EAAM,KAErCP,EAAImC,iBAAiB,mBAAoB,SAAUG,GACjDtC,EAAIyC,KAAKR,MAAMC,SAAW,GAAK3B,EAAM,OACpC,GAGLsB,IAEApB,EAASF,IAAMV,EAAIU,IAAMA,EACzBE,EAASoB,WAAaA,EACtBpB,EAASiC,OAAS,SAAUC,GAC1B,IAAIC,EAAMhC,WAAW+B,GAAKE,KAAKb,IAI/B,MAHiB,iBAANW,GAAkBA,EAAEjC,MAAM,UACnCkC,GAAO,MAEFA,GAETnC,EAASqC,OAAS,SAAUH,GAC1B,IAAIC,EAAMhC,WAAW+B,GAAKE,KAAKb,IAI/B,MAHiB,iBAANW,GAAkBA,EAAEjC,MAAM,SACnCkC,GAAO,OAEFA,GAhHV,CAkHEG,OAAQA,OAAA,MAAkBA,OAAA","file":"static/js/common.000f7f793ddbd8d323ee.js","sourcesContent":[";(function (win, lib) {\n  var doc = win.document\n  var docEl = doc.documentElement\n  var metaEl = doc.querySelector('meta[name=\"viewport\"]')\n  var flexibleEl = doc.querySelector('meta[name=\"flexible\"]')\n  var dpr = 0\n  var scale = 0\n  var tid\n  var flexible = lib.flexible || (lib.flexible = {})\n\n  if (metaEl) {\n    // console.warn('将根据已有的meta标签来设置缩放比例');\n    var match = metaEl.getAttribute('content').match(/initial\\-scale=([\\d\\.]+)/)\n    if (match) {\n      scale = parseFloat(match[1])\n      dpr = parseInt(1 / scale)\n    }\n  } else if (flexibleEl) {\n    var content = flexibleEl.getAttribute('content')\n    if (content) {\n      var initialDpr = content.match(/initial\\-dpr=([\\d\\.]+)/)\n      var maximumDpr = content.match(/maximum\\-dpr=([\\d\\.]+)/)\n      if (initialDpr) {\n        dpr = parseFloat(initialDpr[1])\n        scale = parseFloat((1 / dpr).toFixed(2))\n      }\n      if (maximumDpr) {\n        dpr = parseFloat(maximumDpr[1])\n        scale = parseFloat((1 / dpr).toFixed(2))\n      }\n    }\n  }\n\n  if (!dpr && !scale) {\n    // var isAndroid = win.navigator.appVersion.match(/android/gi)\n    var isIPhone = win.navigator.appVersion.match(/iphone/gi)\n    var devicePixelRatio = win.devicePixelRatio\n    if (isIPhone) {\n      // iOS下，对于2和3的屏，用2倍的方案，其余的用1倍方案\n      if (devicePixelRatio >= 3 && (!dpr || dpr >= 3)) {\n        dpr = 3\n      } else if (devicePixelRatio >= 2 && (!dpr || dpr >= 2)) {\n        dpr = 2\n      } else {\n        dpr = 1\n      }\n    } else {\n      // 其他设备下，仍旧使用1倍的方案\n      dpr = 1\n    }\n    scale = 1 / dpr\n  }\n\n  docEl.setAttribute('data-dpr', dpr)\n  if (!metaEl) {\n    metaEl = doc.createElement('meta')\n    metaEl.setAttribute('name', 'viewport')\n    metaEl.setAttribute('content', 'initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no')\n    if (docEl.firstElementChild) {\n      docEl.firstElementChild.appendChild(metaEl)\n    } else {\n      var wrap = doc.createElement('div')\n      wrap.appendChild(metaEl)\n      doc.write(wrap.innerHTML)\n    }\n  }\n\n  function refreshRem () {\n    var width = docEl.getBoundingClientRect().width\n    if (width / dpr > 540) {\n      width = 540 * dpr\n    }\n    var rem = width / 10\n    docEl.style.fontSize = rem + 'px'\n    flexible.rem = win.rem = rem\n  }\n\n  win.addEventListener('resize', function () {\n    clearTimeout(tid)\n    tid = setTimeout(refreshRem, 300)\n  }, false)\n  win.addEventListener('pageshow', function (e) {\n    if (e.persisted) {\n      clearTimeout(tid)\n      tid = setTimeout(refreshRem, 300)\n    }\n  }, false)\n\n  if (doc.readyState === 'complete') {\n    doc.body.style.fontSize = 12 * dpr + 'px'\n  } else {\n    doc.addEventListener('DOMContentLoaded', function (e) {\n      doc.body.style.fontSize = 12 * dpr + 'px'\n    }, false)\n  }\n\n  refreshRem()\n\n  flexible.dpr = win.dpr = dpr\n  flexible.refreshRem = refreshRem\n  flexible.rem2px = function (d) {\n    var val = parseFloat(d) * this.rem\n    if (typeof d === 'string' && d.match(/rem$/)) {\n      val += 'px'\n    }\n    return val\n  }\n  flexible.px2rem = function (d) {\n    var val = parseFloat(d) / this.rem\n    if (typeof d === 'string' && d.match(/px$/)) {\n      val += 'rem'\n    }\n    return val\n  }\n})(window, window['lib'] || (window['lib'] = {}))\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/common/common.js"],"sourceRoot":""}